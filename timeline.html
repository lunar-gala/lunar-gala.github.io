<!DOCTYPE html>
<html lang="en-US">

<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lunar Gala</title>
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <style type="text/css">
    .recentcomments a {
      display: inline !important;
      padding: 0 !important;
      margin: 0 !important;
    }
  </style>
  <link rel="icon" href="../main-content/uploads/2017/09/cropped-Fav-32x32.png" sizes="32x32" />
  <link rel="icon" href="../main-content/uploads/2017/09/cropped-Fav-192x192.png" sizes="192x192" />
  <link rel="apple-touch-icon-precomposed" href="../main-content/uploads/2017/09/cropped-Fav-180x180.png" />
  <meta name="msapplication-TileImage" content="../main-content/uploads/2017/09/cropped-Fav-270x270.png" />
  <link rel="stylesheet" type="text/css" href="assets/css/timeline.css" />
  <script type="text/javascript" src="assets/js/timeline.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/menu.css">
  <link rel="stylesheet" type="text/css" href="assets/css/grid.css">

  <script type="text/javascript">
    window.mobilecheck = function() {
      var check = false;
      (function(a) {
        if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) check = true;
      })(navigator.userAgent || navigator.vendor || window.opera);
      return check;
    };
    var minSize = 479;
    var maxSize = 991;
    var w = $(window).width();
    //Tablet View
    //if(w > minSize && w <= maxSize){
    //$("body").html("<div class =\"tablet-view\">This experience is best viewed on a desktop.</div>");
    //}
    var startYear = 1997;
    var lastYear = startYear + imageData.length;
    var insideDesciptionElement = false;

    function updateText(curYear, target) {
      year = curYear - startYear;
      $(target).html("");
      title = '<h3 class="info-title">' + (startYear + year) + " / ";
      if (imageData[year].title) {
        title += imageData[year].title;
      } else {
        title += "Year of the " + imageData[year].animal;
      }
      title += "</h3>"
      $(target).append(title);
      // Creating the producers
      producers = imageData[year].producers;
      if (producers.length) {
        start = "<p class ='producers'>";
        producers.map(function(producer, i) {
          element = `<span>${producer}</span>`
          start += (i !== producers.length - 1) ? element + ", " : element;
        });
        end = "</p>";
        $(target).append(start + end);
      }
      if (imageData[year].quote != "") {
        quote = `<p class="quote">${imageData[year].quote}</p>`;
        $(target).append(quote);
      }
      if (imageData[year].desc != "") {
        desc = `<p class="desc">${imageData[year].desc}</p>`;
        $(target).append(desc);
      }
      if (imageData[year].title) {
        animalText = '<p class="animal-text"> Year of the ' + imageData[year].animal + "</p>";
        $(target).append(animalText);
      }
      links = imageData[year].links;
      if (links != []) {
        start = "<p class ='links'>";
        links.map(function(linkObj, i) {
          counter = 1;
          if (linkObj.links) {
            (linkObj.links).map(function(link, j) {
              element = '<a target="_blank" href="' + link + '">' + linkObj.type.replace(/\b\w/g, l => l.toUpperCase());
              element += (linkObj.links.length !== 1) ? ('&nbsp;' + counter) : '';
              element += '</a>' + ((j !== (linkObj.links.length - 1) || i !== (links.length - 1)) ? '&nbsp;/&nbsp;' : '');
              start += element;
              counter++;
            });
          }
        });
        end = "</p>";
        $(target).append(start + end);
      }
      if ($(target).children().length == 2) {
        $(target + " .producers").css("margin-bottom", "0px");
      }
    }
    //Desktop View
    if (!window.mobilecheck() || w > maxSize) {
      $(document).ready(function() {
        var yearElement = "";
        var imageGallery = "";
        for (var i = lastYear - 1; i >= startYear; i--) {
          //creating the year text that will go onto the side for that year
          yearElement += `<li id="${i}" class ="year-single"><a href="javascript:void(0)">${i}</a></li>`;
          //creating the current gallery element
          currentGallery = `<div id="image${i}" class="gallery-image-container visible">`;
          //looping for each of the image in that year's gallery
          if (imageData[i - startYear].count === 0) {
            currentGallery += `<img class = "slide gallery-image" data-src="../main-content/timeline-images/NonAvail.png">`;
          } else {
            pngYears = [2003, 2004, 2005, 2006];
            for (var j = 0; j < imageData[i - startYear].count; j++) {
              if (pngYears.includes(i)) {
                ext = ".png";
              } else {
                ext = ".jpg"
              }
              currentGallery += `<img class = "slide gallery-image" data-src="/main-content/timeline-images/${i}/${j+1}${ext}">`;
            }
          }
          currentGallery += `</div>`;
          //adding the gallery to the big gallery gallery. Galleryception...
          imageGallery += currentGallery;
        };
        $(".years").append(yearElement);
        //Code for the intro video
        $("#2018").before('<li id="intro" class="year-single"><a href="javacscript:void(0)">Intro</a></li>');
        $(".gallery-container").prepend(imageGallery);

        function loadNew() {
          first = true;
          [].forEach.call(document.querySelectorAll('.gallery-image-container:not(.not-visible) img[data-src]'),
            function(img) {
              img.setAttribute('src', img.getAttribute('data-src'));
              img.onload =
                function() {
                  img.removeAttribute('data-src');
                  if (!first) {
                    //img.style.opacity = "0";
                    first = false;
                  }
                };
            });
          plusDivs(0);
        }
        $(".year-single").click(function() {
          var curYearID = $(this).attr("id");
          //Also update the text here
          //This is the intro case
          if (curYearID == "intro") {
            if ($("#intro a").hasClass("currentYear")) {
            } else {
              $(".info").html("");
              $(".actionButtons span").css("opacity", "0");
              $(".year-single a").removeClass("currentYear");
              $("#intro a").addClass("currentYear");
              $(".gallery-image-container").not(document.getElementById(`image${curYearID}`)).removeClass("visible").addClass("not-visible");
              $(".gallery-container").append("<div id='imageIntro' class='gallery-image-container visible'></div>");
              $("#imageIntro").append('<iframe width="560" height="315" src="https://www.youtube.com/embed/KLvRES_aGAs?autoplay=1" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>');
            }
            return;
          }
          //$(".info").text(imageData[curYearID - startYear].desc);
          //get rid of the intro video.
          $(".actionButtons").css("opacity", "1");
          $("#imageIntro").remove();
          updateText(curYearID, ".info");
          // Hiding all the images that wasn't the one that was clicked
          $(".gallery-image-container").not(document.getElementById(`image${curYearID}`)).removeClass("visible").addClass("not-visible");
          // Making sure the clicked year image is visible again
          $(`#image${curYearID}`).removeClass("not-visible").addClass("visible");
          $(".year-single a").removeClass("currentYear");
          $(this).find("a").addClass("currentYear");
          //resetting the slide
          slideIndex = 1;
          $(".count").text(`${slideIndex}/${imageData[curYearID - startYear].count}`);
          plusDivs(0);
        });
        //Need to set the initial page to be the top year!!! DONT FORGET LMAO
        $(`.gallery-image-container`).addClass("not-visible").removeClass("visible");
        //$(`#image${lastYear-1}`).removeClass("not-visible");
        //updateText(lastYear - 1,".info");
        $("#intro").click();
        //$(`#${lastYear-1} a`).addClass("currentYear");
        //$(`#image${lastYear-1}`).addClass("visible");
        //slideshow stuff
        //starting with the last year
        showDivs(slideIndex, lastYear - 1);
      });
      $(document).keydown(function(e) {
        if ($(".currentYear").parent().attr("id") != "intro") {
          currentYear = parseInt($(".currentYear").parent().attr("id"));
        } else {
          currentYear = "intro";
        }
        var targetYear = currentYear;
        switch (e.keyCode) {
          case 38:
            if (currentYear == lastYear - 1) {
              targetYear = "intro";
            } else if (currentYear == "intro") {
              targetYear = startYear;
            } else {
              targetYear = currentYear + 1;
            }
            $(`#${targetYear} a`).click();
            break;
          case 40:
            if (currentYear == startYear) {
              targetYear = "intro";
            } else if (currentYear == "intro") {
              targetYear = lastYear - 1;
            } else {
              targetYear = currentYear - 1;
            }
            $(`#${targetYear} a`).click();
            break;
          case 37:
            plusDivs(-1);
            break;
          case 39:
            plusDivs(+1);
            break;
        }
      });
      var slideIndex = 1;

      function plusDivs(n) {
        year = parseInt($(".currentYear").text());
        showDivs(slideIndex += n, year);
        $(".count").text(`${slideIndex}/${imageData[year - startYear].count}`);
      }

      function showDivs(n, year) {
        var x = $(`#image${year} .slide`);
        if (n > x.length) {
          slideIndex = 1
        }
        if (n < 1) {
          slideIndex = x.length
        };
        x.css("opacity", "0");
        loadThis(x.eq(slideIndex - 1));
        d = x.eq(slideIndex - 1)[0].getBoundingClientRect();
        $(".white-cover").css("width", parseInt(d.width));
        $(".white-cover").css("height", parseInt(d.height));
        $(".white-cover").css("top", parseInt(d.top));
        $(".white-cover").css("left", parseInt(d.left));
        if (x.eq(slideIndex - 1)[0].firstLoad) {
          x.eq(slideIndex - 1).css("opacity", "1");
          d = x.eq(slideIndex - 1)[0].getBoundingClientRect();
          $(".white-cover").css("width", parseInt(d.width));
          $(".white-cover").css("height", parseInt(d.height));
          $(".white-cover").css("top", parseInt(d.top));
          $(".white-cover").css("left", parseInt(d.left));
        } else {
          //change the background here again
          d = x.eq(slideIndex - 1)[0].getBoundingClientRect();
          $(".white-cover").css("width", parseInt(d.width));
          $(".white-cover").css("height", parseInt(d.height));
          $(".white-cover").css("top", parseInt(d.top));
          $(".white-cover").css("left", parseInt(d.left));
        }
      };

      function updateImg(x) {
        containerAR = x.parent().width() / x.parent().height();
        imageAR = x.width() / x.height();
        if (imageAR < containerAR) {
          x.css("height", "100%");
          x.css("width", "auto");
          x.css("right", "0");
          x.css("left", "0");
          if (parseInt(x.css("margin-right").slice(0, -2)) < 25) {
            x.css("left", "auto");
          }
        } else {
          x.css("width", "100%");
          x.css("right", "0");
          x.css("height", "auto");
          x.css("left", "auto");
        }
      }

      function loadThis(x) {
        x.attr("src", x.attr("data-src"));
        x[0].onload =
          function() {
            x.removeAttr("data-src");
            x.css("opacity", "1");
            updateImg(x);
            x[0].firstLoad = true;
            // Change the background here
            d = x[0].getBoundingClientRect();
            $(".white-cover").css("width", parseInt(d.width));
            $(".white-cover").css("height", parseInt(d.height));
            $(".white-cover").css("top", parseInt(d.top));
            $(".white-cover").css("left", parseInt(d.left));
          }
      }
      start = 1;
      window.onload = function() {
        //adding the event listerner for Mozilla
        if (window.addEventListener)
          document.addEventListener('DOMMouseScroll', moveObject, false);
        //for IE/OPERA etc
        document.onmousewheel = moveObject;
      }
      moved = false;

      function moveObject(event) {
        if (!insideDesciptionElement) {
          var delta = 0;
          if (!event) event = window.event;
          // normalize the delta
          if (event.wheelDelta) {
            // IE and Opera
            delta = event.wheelDelta / 60;
          } else if (event.detail) {
            // W3C
            delta = -event.detail / 2;
          }
          if (!moved) {
            moved = true;
            setTimeout(() => {
              moved = false;
            }, 305);
            if ($(".currentYear").parent().attr("id") != "intro") {
              currentYear = parseInt($(".currentYear").parent().attr("id"));
            } else {
              currentYear = "intro";
            }
            targetYear = currentYear;
            if (delta < 0) {
              //mouse movement
              if (currentYear == lastYear - 1) {
                // going up in the years
                targetYear = "intro";
              } else if (currentYear == "intro") {
                targetYear = startYear;
              } else {
                targetYear = currentYear + 1;
              }
              $(`#${targetYear} a`).click();
            } else if (delta > 0) {
              if (currentYear == startYear) {
                //going down in the years
                //targetYear = lastYear-1;
                targetYear = "intro";
              } else if (currentYear == "intro") {
                targetYear = lastYear - 1;
              } else {
                targetYear = currentYear - 1;
              }
              $(`#${targetYear} a`).click();
            }
          }
        }
      }

      function placeActionButtons() {
        var link = $(".slide");
        $(".actionButtons").css("opacity", "1");
        var offset = link.offset();
        var top = offset.top;
        var left = offset.left;
        var leftMargin = parseInt(link.css("margin-left").slice(0, -2));
        var bottom = top + link.outerHeight();
        $(".actionButtons").css("top", Math.round(bottom + 15).toString() + "px");
        $(".actionButtons").css("left", Math.round(left - leftMargin).toString() + "px");
        $(".actionButtons").css("width", $(".gallery-image-container").width());
      }
      $(document).ready(function() {
        if (!window.mobilecheck() || w > maxSize) {
          setInterval(placeActionButtons, 1000);
          $(window).resize(function() {
            placeActionButtons();
            $(".actionButtons").css("opacity", "1");
            $(".visible .slide").each(function() {
              updateImg($(this));
            });
          });
        }
        $(".info-container").mouseenter(function() {
          insideDesciptionElement = true;
        });
        $(".info-container").mouseleave(function() {
          insideDesciptionElement = false;
        });
      });
    }
    //Mobile View
    $(document).ready(function() {
      if (window.mobilecheck() || w <= maxSize) {
        $("body").addClass("mobile");
        $("body").html(`
		  	<!--MOBILE NAV-->

			<div class="mobile-container">

			  <div class="mobile-head">

			    <div class="title">LUNAR GALA</div>

			    <div class="button-container">
			      <!--
			      <div class="a">Menu</div>
			      <div class="b">Close</div>
			      -->
			      <span></span>
			      <span></span>
			    </div>

			  </div>

			  <div class="mobile-menu">
			    <div class="back" style="background-image:url(2017images/blobs.jpg)"></div>

			    <div class="links">
			      <ul>
			        <li> <a href="index.html">About</a></li>
			        <li> <a href="blog.html">Blog</a></li>
			        <li> <a href="timeline.html">Timeline</a></li>
			        <li> <a href="contact.html">Contact</a></li>
			      </ul>
			    </div>

			    <div class="icons">
			      <ul>
			        <li> <a href="https://www.youtube.com/channel/UC5eDMZLUtbDUi2WE2XU8ptg"><i class="fa fa-youtube-play"></i></a></li>
			        <li> <a href="https://vimeo.com/lunargala"><i class="fa fa-vimeo-square"></i></a></li>
			        <li> <a href="https://www.facebook.com/lunargala"><i class="fa fa-facebook"></i></a></li>
			        <li> <a href="https://www.instagram.com/lunargala/"><i class="fa fa-instagram"></i></a></li>
			        <li> <a href="mailto:cmu.lunargala@gmail.com"><i class="fa fa-envelope"></i></a></li>
			      </ul>
			    </div>
			  </div>

			</div>

		  <div class="content">
	    </div>
	  `);
    $(".button-container").click(function() {
      $(".button-container").toggleClass("open");
      $(".mobile-menu").toggleClass("open");
    });

        cardEnd = "</div>";
        const startYear = 1997;
        const lastYear = startYear + imageData.length;
        for (i = lastYear - 1; i >= startYear; i--) {
          cardStart = "<div class = 'card' id ='year" + parseInt(i) + "'>";
          if (imageData[i - startYear].count != 0) {
            path = '/main-content/timeline-images/mobile-picks/' + parseInt(i) + '.jpg'
            image = "<img src=" + path + "></img>";
          } else {
            image = "<img src= '../main-content/timeline-images/NonAvail.png'></img>";
          }
          text = "<div class='text info'><div class='card-title'>" + parseInt(i) + "</div></div>";
          $(".content").append(cardStart + image + text + cardEnd);
          updateText(i, "#year" + parseInt(i) + " .text");
          $("#year" + parseInt(i) + " .text h3").insertAfter("#year" + parseInt(i) + " img");
        }
        collapsed = false;

        function collapse() {
          if (!collapsed) {
            $(".nav").toggleClass("collapsed");
            collapsed = true;
          }
        }
        //Make first card 100% opacity
        function isElementInViewport(el) {
          //special bonus for those using jQuery
          if (typeof jQuery === "function" && el instanceof jQuery) {
            el = el[0];
          }
          var rect = el.getBoundingClientRect();
          return rect.top <= (window.innerHeight || document.documentElement.clientHeight) * 0.4 &&
            rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) * 0.4
        }
        //Make rest less 10%opacity
        //Code for turning the opacity down for cards that are not on the page
        $(window).scroll(function() {
          $(".card").each(function() {
            if (isElementInViewport($(this))) {
              $(this).css("opacity", "1");
            } else {
              $(this).css("opacity", "0.1");
            }
          });
        });
      }
    });
  </script>
</head>

<body>
  <nav class="nav-left">
    <ul>
      <li><a href="index.html">About</a></li>
<!--      <li><a href="blog.html">Blog</a></li>-->
      <li><a href="timeline.html">Timeline</a></li>
<!--      <li><a href="contact.html">Contact</a></li>-->
    </ul>
  </nav>

  <div class="timeline-background"></div>

  <!--MOBILE NAV-->

  <div class="mobile-container">

    <div class="mobile-head">

      <div class="title">LUNAR GALA</div>

      <div class="button-container">
        <!--
      <div class="a">Menu</div>
      <div class="b">Close</div>
      -->
        <span></span>
        <span></span>
      </div>

    </div>

    <div class="mobile-menu">
      <div class="back" style="background-image:url(2017images/blobs.jpg)"></div>

      <div class="links">
        <ul>
          <li> <a href="index.html">About</a></li>
<!--          <li> <a href="blog.html">Blog</a></li>-->
          <li> <a href="timeline.html">Timeline</a></li>
<!--          <li> <a href="contact.html">Contact</a></li>-->
        </ul>
      </div>

      <div class="icons">
        <ul>
          <li> <a href="https://www.youtube.com/channel/UC5eDMZLUtbDUi2WE2XU8ptg"><i class="fa fa-youtube-play"></i></a></li>
          <li> <a href="https://vimeo.com/lunargala"><i class="fa fa-vimeo-square"></i></a></li>
          <li> <a href="https://www.facebook.com/lunargala"><i class="fa fa-facebook"></i></a></li>
          <li> <a href="https://www.instagram.com/lunargala/"><i class="fa fa-instagram"></i></a></li>
          <li> <a href="mailto:cmu.lunargala@gmail.com"><i class="fa fa-envelope"></i></a></li>
        </ul>
      </div>
    </div>

  </div>
  <div class="background-images">
    <img src="../2017images/blobs.jpg" alt="LG Bubbles" class="right_background">
    <img src="../2017images/light1.jpg" alt="Vestige" class="top_background">
    <img src="../2017images/threads.jpg" alt="LG Circles" class="left_background">
  </div>
  <div class="row container-timeline">
    <div class="col-xs-4 navbar">
      <div class="navbar-position-container">
        <div class="info-container">
          <p class="info">
            Inspired by bright colors and kaleidoscopic textures, Sonder personified the awakening through which we become aware of the parallels between our own vivid and complex experiences and that of any passerby. This was the first year Lunar Gala Alumni took
            part in the show, bringing together the past and present.
          </p>
        </div>
      </div>
    </div>
    <div class="col-xs-8 gallery">
      <div class="row">
        <div class="col-xs-2 years-container">
          <ul class="years">

          </ul>
        </div>
        <div class="col-xs-10 gallery-container">
        </div>
      </div>
    </div>
  </div>
  <div class="actionButtons">
    <span class="nav">
			  <a id="prev" onclick="plusDivs(-1)" href="javascript:void(0)">Previous</a>/<a id="next" onclick="plusDivs(+1)" href="javascript:void(0)">Next</a>
			</span>
    <span class="count">
			  1/26
			</span>
  </div>


</body>

<script type="text/javascript" src="assets/js/submenu.js"></script>

</html>
